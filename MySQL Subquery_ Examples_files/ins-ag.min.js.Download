(()=>{"use strict";var t={806:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CreativeCollection=void 0;const s=i(170);e.CreativeCollection=s.default},170:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=i(620);e.default=class{constructor(){this.CLICK_ME_PATTERN=/alt="Click Me"><img src="([^"]+\.(jpg|jpeg|png|gif|bmp|webp))/i}extractImageUrlFromHTML(t){const e=this.extractImageUrlFromHTMLByClickMe(t);if(e)return e}extractImageUrlFromHTMLByClickMe(t){const e=t.match(this.CLICK_ME_PATTERN);if(e&&e[1])return e[1]}extractGAMCreativeDataFromElement(t,e=!1){var i;if(t)try{const n=e?t.outerHTML:void 0,r=Array.from(t.querySelectorAll("iframe")).filter(t=>s.t(t));if(!r.length)return;for(const t of r){const r=null===(i=t.contentDocument)||void 0===i?void 0:i.querySelector("a[href*=adurl]");if(r){const t=r.getAttribute("href")||"",i=new URL(t).searchParams.get("adurl");if(i){const t=new URL(i).origin,o=r.querySelector("img"),c=o&&o.getAttribute("src")||void 0;let a;try{a=c?s.normalizeImageSrc(c):void 0}catch(t){a=void 0}return Object.assign({gamClickUrl:i,gamAdvertiserDomain:t,gamCreativeUrl:a},!e||t&&a?{}:{html:n})}}}return e?{html:n}:void 0}catch(t){}}}},620:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeImageSrc=e.t=void 0,e.t=function(t){let e=+new Date+""+Math.random();try{let i=t.contentWindow;return!!i&&(i[e]="asd","asd"===i[e])}catch(t){return!1}},e.normalizeImageSrc=function(t){return new URL(t).href}},486:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Engagement=void 0;var s=i(569);e.Engagement=s.default},569:function(t,e,i){var s=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var s=Array(t),n=0;for(e=0;e<i;e++)for(var r=arguments[e],o=0,c=r.length;o<c;o++,n++)s[n]=r[o];return s};Object.defineProperty(e,"__esModule",{value:!0});var n=i(502),r=function(){function t(t){this._velocities=[],this._listeners=[],this._isSubscribed=!1,this._timeoffset=t||Date.now(),this._outOfFocusTime=0,this._hiddenTime=0,this._pageHeight=this.getPageHeight(),this._windowHeight=this.getWindowHeight(),this._lastScrollingDistance=this.getScrollingDistance(),this._maxScrollDepthPercentage=this.getMaxScrollDepth(),this._lastVelocityReportTime=Date.now()}return t.prototype.subscribe=function(){this._isSubscribed||(this._isSubscribed=!0,this.initScrollListener(),this.initVisibilityChangeListener(),this.initVelocityListener(),this.initResizeListener())},t.prototype.unsubscribe=function(){this._isSubscribed&&(this._listeners.forEach(function(t){window.removeEventListener(t.eventName,t.eventHandler)}),clearInterval(this._velocityInterval),this._listeners=[],this._isSubscribed=!1)},t.get=function(e){return t._instance||(t._instance=new t(e)),t._instance},t.prototype.getData=function(){return{max_depth_percentage:this._maxScrollDepthPercentage,screen_length:this.getScreenLength(),time_on_page:this.getTimeOnPage(),velocity_excluding_static_time:this.getAverageVelocity(n.VelocityType.EXCLUDE_STATIC_USER),velocity_including_static_time:this.getAverageVelocity(n.VelocityType.INCLUDE_STATIC_USER),page_load_time:this.getPageLoadTime()}},t.prototype.getPageLoadTime=function(){try{var t=window.performance.getEntriesByType("navigation")[0];if("complete"===document.readyState&&t&&t.loadEventEnd>0&&t.domContentLoadedEventStart>0)return Math.floor(Math.abs(t.loadEventEnd-t.domContentLoadedEventStart))}catch(t){}return-1},t.prototype.getScreenLength=function(){return window.screen.availHeight||window.screen.height},t.prototype.initResizeListener=function(){var t=this,e=function(){t._pageHeight=t.getPageHeight(),t._windowHeight=t.getWindowHeight()};this._listeners.push({eventName:"resize",eventHandler:e}),window.addEventListener("resize",e)},t.prototype.initScrollListener=function(){var t=this,e=this.throttle(function(){t._maxScrollDepthPercentage=t.getMaxScrollDepth()},1e3);this._listeners.push({eventName:"scroll",eventHandler:e}),window.addEventListener("scroll",e)},t.prototype.initVisibilityChangeListener=function(){var t=this,e=function(){"hidden"===window.document.visibilityState?t._hiddenTime=Date.now():t._hiddenTime>0&&(t._outOfFocusTime=t._outOfFocusTime+(Date.now()-t._hiddenTime))};this._listeners.push({eventName:"visibilitychange",eventHandler:e}),window.addEventListener("visibilitychange",e)},t.prototype.initVelocityListener=function(){var t=this;this._velocityInterval||(this._velocityInterval=setInterval(function(){t._velocities.push(t.getMomentVelocity())},1e3))},t.prototype.getMaxScrollDepth=function(){this._pageHeight=this.getPageHeight(),this._windowHeight=this.getWindowHeight();var t=this.getScrollDepthPercentages(),e=this._maxScrollDepthPercentage||0;return Math.max(e,t)},t.prototype.getScrollDepthPercentages=function(){var t=this.getScrollingDistance(),e=this._pageHeight;return Math.round(t/e*100)},t.prototype.getScrollingDistance=function(){return this.getPageYOffset()+this._windowHeight},t.prototype.getPageYOffset=function(){return window.pageYOffset||window.scrollY},t.prototype.getWindowHeight=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},t.prototype.getPageHeight=function(){var t,e;return Math.floor(Math.max(null===(t=window.document.body)||void 0===t?void 0:t.scrollHeight,null===(e=window.document.body)||void 0===e?void 0:e.offsetHeight,window.document.documentElement.clientHeight,window.document.documentElement.scrollHeight,window.document.documentElement.offsetHeight))},t.prototype.getTimeOnPage=function(){var t=(Date.now()-this._timeoffset)/1e3,e=this._outOfFocusTime/1e3;return Number((t-e).toFixed(2))},t.prototype.getAverageVelocity=function(t){var e=s(this._velocities);t===n.VelocityType.EXCLUDE_STATIC_USER&&(e=e.filter(Number));var i=e.reduce(function(t,e){return t+e},0);return e.length>0?i/e.length:-1},t.prototype.getMomentVelocity=function(){var t=Date.now(),e=this.getScrollingDistance()-this._lastScrollingDistance,i=(t-this._lastVelocityReportTime)/1e3;return this._lastVelocityReportTime=t,this._lastScrollingDistance=this.getScrollingDistance(),!e?0:Math.round(Math.abs(e/i))},t.prototype.getTitlesText=function(){var t=[];return document.querySelectorAll("h1").forEach(function(e){t.push(e.innerText.trim().replace(/_/g,"-"))}),t.length?t.join("_"):void 0},t.prototype.getDescriptionText=function(){var t=[];return document.querySelectorAll("meta[name='description'],meta[property='og:description']").forEach(function(e){t.push(e.content.trim().replace(/_/g,"-"))}),t.length?t.join("_"):void 0},t.prototype.throttle=function(t,e){var i=Date.now();return function(){i+e-Date.now()<0&&(t(),i=Date.now())}},t}();e.default=r},502:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VelocityType=void 0,function(t){t.EXCLUDE_STATIC_USER="exclude_static_user",t.INCLUDE_STATIC_USER="include_static_user"}(e.VelocityType||(e.VelocityType={}))},125:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NonUniqueElementState=e.ProviderType=e.ProvidersDetector=void 0;const s=i(541);e.ProvidersDetector=s.default;const n=i(304);Object.defineProperty(e,"ProviderType",{enumerable:!0,get:function(){return n.ProviderType}});const r=i(258);Object.defineProperty(e,"NonUniqueElementState",{enumerable:!0,get:function(){return r.NonUniqueElementState}})},258:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NonUniqueElementState=void 0,function(t){t.MULTI="multi",t.NOT_FOUND="notFound"}(e.NonUniqueElementState||(e.NonUniqueElementState={}))},177:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SlotValidStatus=void 0,function(t){t.RENDERED="rendered",t.LAZY="lazy",t.EXISTS="exists",t.EMPTY="empty",t.NON_UNIQUE_ELEMENT="non-unique-element"}(e.SlotValidStatus||(e.SlotValidStatus={}))},541:function(t,e,i){var s=this&&this.__rest||function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i};Object.defineProperty(e,"__esModule",{value:!0});const n=i(177),r=i(304),o=i(922),c=i(335),a=i(441),d=i(99),h=i(702);class u{constructor(t,e){this.foundAds=[],this.providers=[],this.adInProcessTimeout=1e3,this.terminateCallbacks=[],this.logger=t,h.Converter.get(e)}static get(){return this.instance}static init(t,e,i){return this.instance||(this.instance=new u(e,i),this.instance.initProviders(t)),this.instance}initProviders(t){this.logger.info("Initializing with: ",t.map(t=>t.type).join(", ")),t.forEach(t=>{const e=t.type;switch(e){case r.ProviderType.HEADER_BIDDING:this.providers.push(new a.PrebidJsProvider(this.logger,this.detectionCallback.bind(this,e)));break;case r.ProviderType.DFP:this.providers.push(new o.GoogleProvider(this.logger,this.detectionCallback.bind(this,e),!!t.debug));break;case r.ProviderType.AD_SENSE:this.providers.push(new d.AdSenseProvider(this.logger,this.detectionCallback.bind(this,e)));break;default:this.logger.error(`Provider type ${e} is unsupported`)}})}classifySlot(t,e,i,s){if(i)return{status:n.SlotValidStatus.EMPTY};if(s)return{status:n.SlotValidStatus.NON_UNIQUE_ELEMENT};if(this.isValidNewDetection(t,e)){const t=c.Utils.resolveInnerMostSingleChild(e),i=c.Utils.getElementSize(t);return c.Utils.isRendered(t,i)?{status:n.SlotValidStatus.RENDERED,measuredSize:i}:{status:n.SlotValidStatus.LAZY}}return{status:n.SlotValidStatus.EXISTS}}isValidNewDetection(t,e){return!(!e||c.Utils.isPositionedDisconnected(window.document.body,e)||this.isDetectedAlready(e,t))}isDetectedAlready(t,e){return!!this.foundAds.some(t=>t.id===e)||(!(!t||!c.Utils.isDescendantElement(this.foundAds.flatMap(t=>{var e;return null!==(e=t.element)&&void 0!==e?e:[]}),t))||this.foundAds.some(e=>e.element&&c.Utils.isDescendantElement([t],e.element)))}detectionCallback(t,e,i,s,r,o,c){const a=this.classifySlot(e,i,o,c);switch(a.status&&this.logger.verbose(`${t} slot ${e} classified as ${a.status}`),a.status){case n.SlotValidStatus.RENDERED:this.addFoundAd(t,e,i,a.measuredSize,void 0,s,r,!1,void 0);break;case n.SlotValidStatus.LAZY:this.handleLazyRendering(t,i,e,s,r);break;case n.SlotValidStatus.EXISTS:this.handleExistingAd(t,i,e,s,r);break;case n.SlotValidStatus.EMPTY:this.addFoundAd(t,e,i,void 0,void 0,s,r,!0);break;case n.SlotValidStatus.NON_UNIQUE_ELEMENT:this.addFoundAd(t,e,i,void 0,void 0,s,r,!1,c);break;default:this.logger.error("Unknown slot classification status")}}getHighestRefreshedAd(t){return this.foundAds.reduce((e,i)=>i.id===t&&i.refreshCount>e.refreshCount?i:e,this.foundAds[0])}handleAdInProcessDetection(t,e,i,s,n){var o;this.logger.verbose(`${t} updated by ${i}`);const a=Date.now();if(e.maxUpdateDuration=a-e.initialTimeForUpdateDuration,i!==r.ProviderType.DFP&&(e.provider=i),e.adUnit||(e.adUnit=s),n){["creativeData","providerData"].forEach(t=>{n[t]&&(e[t]||(e[t]={}),Object.assign(e[t],n[t]))});const t=null===(o=h.Converter.get())||void 0===o?void 0:o.convertToUSD(n.cpm,n.currency);t&&(e.cpm?e.cpm!==t&&this.logger.error("Got cpm diff when updated ad"):e.cpm=n.cpm);const i=n.reportedSize&&c.Utils.isValidSize(n.reportedSize)?n.reportedSize:void 0;i&&(e.size=i,e.reportedSize=i)}}shouldUpdateAd(t,e,i){return t.inProcess&&t.provider!==e&&(!t.element||t.element===i)}handleExistingAd(t,e,i,s,n){const r=this.getHighestRefreshedAd(i);r&&(this.shouldUpdateAd(r,t,e)?this.handleAdInProcessDetection(i,r,t,s,n):this.isRefreshedAd(r)&&(r.isActive=!1,this.logger.verbose(`${i} refreshed`),this.addFoundAd(t,i,e,void 0,r,s,n)))}addFoundAd(t,e,i,s,n,r,o,a=!1,d){const h=a?void 0:Date.now(),l=h||Date.now(),v=!!i&&c.Utils.getElementPercentageInViewport(i)>=50,m=(null==o?void 0:o.reportedSize)&&c.Utils.isValidSize(o.reportedSize)?o.reportedSize:void 0,w=m||s||i?c.Utils.getElementSize(i):void 0,g=a?-1:n?n.refreshCount+1:0,b=!a&&(null==n?void 0:n.initialTime)?(Date.now()-n.initialTime)/1e3:void 0,{highestBid:f,creativeData:p,highestCpmByKv:O}=o||{},y=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({id:e,provider:t,inProcess:!0,isActive:!(a||!i||d),isEmpty:a,refreshCount:g,isRenderedInView:v,initialTimeForUpdateDuration:l,maxUpdateDuration:0,browserTimeStamp:this.getLocalIsoZonedDateTime()},w?{size:w}:{}),h?{initialTime:h}:{}),i?{element:i}:{}),d?{nonUniqueElementState:d}:{}),p?{creativeData:p}:{}),(null==o?void 0:o.providerData)?{providerData:o.providerData}:{}),void 0!==(null==o?void 0:o.cpm)?{cpm:o.cpm}:{}),(null==o?void 0:o.winningBid)?{winningBid:o.winningBid}:{}),r?{adUnit:r}:{}),b?{refreshRate:b}:{}),void 0!==f?{highestBid:f}:{}),void 0!==O?{highestCpmByKv:O}:{});this.listenForAdRemoval(y),this.foundAds.push(y),this.logger.verbose(`Added found ad ${y.id} by ${y.provider}:`,y.element);const j=setTimeout(()=>{y.inProcess=!1,this.logger.verbose(`Done processing ad ${y.id} by ${y.provider}:`,y.element),this.invokeAdEventCallbacks(u.onAdDoneProcessCallbacks,y)},this.adInProcessTimeout);!m&&y.element&&this.trackAdSizeUpdate(y),this.invokeAdEventCallbacks(u.onAdFoundCallbacks,y),this.terminateCallbacks.push(()=>{clearTimeout(j)})}getLocalIsoZonedDateTime(){try{const t=new Date,e=t=>String(t).padStart(2,"0"),i=t.getFullYear(),s=e(t.getMonth()+1),n=e(t.getDate()),r=e(t.getHours()),o=e(t.getMinutes()),c=e(t.getSeconds()),a=-t.getTimezoneOffset(),d=a>=0?"+":"-",h=e(Math.floor(Math.abs(a)/60));return`${i}-${s}-${n}T${r}:${o}:${c}${d}${h}:${e(Math.abs(a)%60)}`}catch(t){return}}trackAdSizeUpdate(t){if(!t.element)return;const e=()=>{clearInterval(i),clearTimeout(s)},i=setInterval(()=>{if(t.reportedSize)return void e();const i=t.element.querySelector("iframe")||t.element,s=c.Utils.getElementSize(i);(t.size&&t.size.w!==s.w||t.size&&t.size.h!==s.h)&&c.Utils.isValidSize(s)&&(t.size=s,e())},500),s=setTimeout(()=>{e()},2500);this.terminateCallbacks.push(e)}handleLazyRendering(t,e,i,s,n){this.waitForInflating(e).then(r=>{this.logger.verbose(i,"inflated to",r),this.isValidNewDetection(i,e)?this.addFoundAd(t,i,e,r,void 0,s,n):this.handleExistingAd(t,e,i,s,n)}).catch(t=>{this.logger.verbose(i,"did not inflate",t)})}waitForInflating(t){return new Promise((e,i)=>{let s=10;const n=setInterval(()=>{const r=c.Utils.resolveAdSize(t);c.Utils.isValidSize(r)&&(clearInterval(n),e(r)),s--||(clearInterval(n),i(r))},500);this.terminateCallbacks.push(()=>{clearInterval(n),i({})})})}isRefreshedAd(t){return!t.inProcess}cloneAdByOneDepth(t){const{reportedSize:e}=t,i=s(t,["reportedSize"]);return Object.entries(i).forEach(([t,e])=>{"element"!==t&&"object"==typeof e&&(i[t]=Array.isArray(e)?[...e]:Object.assign({},e))}),i}invokeAdEventCallbacks(t,e){if(!t.length)return;const i=this.cloneAdByOneDepth(e);t.forEach(t=>{try{t(i)}catch(t){this.logger.error("Failed to invoke ad event callback",t)}})}listenForAdRemoval(t){var e;const i=null===(e=t.element)||void 0===e?void 0:e.parentElement;if(!i)return;const s=i.parentElement!==document.body?i.parentElement:void 0,n=new MutationObserver(e=>{for(const i of e)if(Array.from(i.removedNodes).some(e=>e===t.element||e.contains(t.element))){t.isActive=!1,n.disconnect(),this.logger.verbose(`Ad ${t.id} removal detected`),this.invokeAdEventCallbacks(u.onAdRemovedCallbacks,t);break}});n.observe(i,{childList:!0}),s&&n.observe(s,{childList:!0})}static onAdEvent(t,e){return"function"==typeof e?(t.push(e),()=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)}):()=>{}}static onAdFound(t){return this.onAdEvent(this.onAdFoundCallbacks,t)}static onAdDoneProcess(t){return this.onAdEvent(this.onAdDoneProcessCallbacks,t)}static onAdRemoved(t){return this.onAdEvent(this.onAdRemovedCallbacks,t)}getAllAds(t=!1){return(t?this.foundAds.filter(t=>t.isActive):this.foundAds).map(t=>this.cloneAdByOneDepth(t))}terminate(){this.logger.info("Terminating..."),this.providers.forEach(t=>t.terminate()),this.terminateCallbacks.forEach(t=>t()),u.onAdFoundCallbacks.length=0,u.onAdDoneProcessCallbacks.length=0,u.onAdRemovedCallbacks.length=0,u.instance=void 0,this.terminateCallbacks.length=0,this.providers.length=0}}e.default=u,u.onAdFoundCallbacks=[],u.onAdDoneProcessCallbacks=[],u.onAdRemovedCallbacks=[]},99:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AdSenseProvider=void 0;const s=i(304);class n extends s.BaseProvider{constructor(t,e){super(t,s.ProviderType.AD_SENSE),this.adSenseSelector="ins.adsbygoogle[data-ad-format]",this.detectionCallback=e,this.collectPastEvents()}processAdSenseElement(t){var e;const i=t.id||(null===(e=t.firstElementChild)||void 0===e?void 0:e.id);if(i){const t=this.getElementData(i);this.detectionCallback(i,t.element,void 0,void 0,void 0,t.nonUniqueElementState)}}collectPastEvents(){Array.from(document.querySelectorAll(this.adSenseSelector)).forEach(t=>{this.logger.verbose("Processing AdSense element",t),this.processAdSenseElement(t)})}subscribe(){}terminate(){}}e.AdSenseProvider=n},304:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseProvider=e.ProviderType=void 0;const s=i(258);!function(t){t.DFP="dfp",t.HEADER_BIDDING="header_bidding",t.AD_SENSE="ad_sense",t.MANUAL_AD="manual_ad"}(e.ProviderType||(e.ProviderType={}));e.BaseProvider=class{constructor(t,e){this.type=e,this.logger=t}getElementData(t){const e=document.querySelectorAll(`[id="${t}"]`);return{element:1===e.length?e[0]:void 0,nonUniqueElementState:e.length>1?s.NonUniqueElementState.MULTI:0===e.length?s.NonUniqueElementState.NOT_FOUND:void 0}}formatAdvertiserDomains(t){const e=Array.isArray(t)?t:t.split(",").filter(t=>t.trim().length>0);return Array.from(new Set(e.map(t=>t.replace(/^(https?:\/\/)?(www\.)?/,""))))}}},922:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GoogleProvider=void 0;const s=i(304),n=i(806),r=i(442);class o extends s.BaseProvider{constructor(t,e,i=!1){super(t,s.ProviderType.DFP),this.terminateCallbacks=[],this.isDebug=!1,this.PREBID_AD_ID_KEY_VALUES={prebid:"hb_adid",freestar:"fs_adid"},this.detectionCallback=e,this.initSdkInstance(),this.subscribe(),this.collectPastEvents(),this.isDebug=i}initSdkInstance(){var t,e;this.sdkInstance=(t=window).googletag||(t.googletag={}),(e=this.sdkInstance).cmd||(e.cmd=[])}processAdSlot(t,e,i){const s=t.getSlotElementId(),n=e?void 0:this.getElementData(s),o=null==n?void 0:n.element,c=t.getTargeting("fs_auction_id")[0];let a;for(let e in this.PREBID_AD_ID_KEY_VALUES)if(a=t.getTargeting(this.PREBID_AD_ID_KEY_VALUES[e])[0],a)break;const d=r.HighestBidCollector.get().getHighestBidByTargeting(s,a,c),h=t.getAdUnitPath();if(e||o&&t.getResponseInformation()||(null==n?void 0:n.nonUniqueElementState)){const r=Object.assign(this.extractAdDetails(d,t,i,e,this.isDebug),{highestCpmByKv:d});this.detectionCallback(s,o,h,r,e,null==n?void 0:n.nonUniqueElementState)}}subscribe(){const t=t=>{this.processAdSlot(t.slot,t.isEmpty,t.size||void 0)};this.sdkInstance.cmd.push(()=>{var e,i,s;null===(s=null===(i=(e=this.sdkInstance).pubads)||void 0===i?void 0:i.call(e))||void 0===s||s.addEventListener(o.SLOT_RENDER_ENDED_EVENT,t)}),this.terminateCallbacks.push(()=>{this.sdkInstance.cmd.push(()=>{var e,i,s;null===(s=null===(i=(e=this.sdkInstance).pubads)||void 0===i?void 0:i.call(e))||void 0===s||s.removeEventListener(o.SLOT_RENDER_ENDED_EVENT,t)})})}collectPastEvents(){this.sdkInstance.cmd.push(()=>{var t,e,i;(null===(i=null===(e=(t=this.sdkInstance).pubads)||void 0===e?void 0:e.call(t))||void 0===i?void 0:i.getSlots()).forEach(t=>{this.processAdSlot(t)})})}extractAdDetails(t,e,i,s,o=!1){const c=!s&&Array.isArray(i)?{w:i[0],h:i[1]}:void 0,a=e.getSlotElementId(),d=document.getElementById(a),h=(new n.CreativeCollection).extractGAMCreativeDataFromElement(d,o);h&&(h.gamAdvertiserDomain=h.gamAdvertiserDomain?this.formatAdvertiserDomains([h.gamAdvertiserDomain])[0]:void 0);return{highestBid:"number"==typeof t?t:r.HighestBidCollector.get().getHighestBid(a),reportedSize:c,creativeData:h}}terminate(){this.terminateCallbacks.forEach(t=>t())}}e.GoogleProvider=o,o.SLOT_RENDER_ENDED_EVENT="slotRenderEnded"},441:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PrebidJsProvider=void 0;const s=i(304),n=i(806),r=i(442),o=i(702);class c extends s.BaseProvider{constructor(t,e){super(t,s.ProviderType.HEADER_BIDDING),this.sdkInstances=[],this.terminateCallbacks=[],this.AD_RENDER_SUCCEEDED_EVENT="adRenderSucceeded",this.AUCTION_END_EVENT="auctionEnd",this.BID_RESPONSE_EVENT="bidResponse",this.SET_TARGETING="setTargeting",this.detectionCallback=e,this.initSdkInstances()}getPbjsInstancesNames(){return(window._pbjsGlobals||[]).filter(t=>!t.includes("PREBID_GLOBAL"))}initSdkInstances(){const t=()=>{this.getPbjsInstancesNames().filter(t=>!this.sdkInstances.some(e=>e.name===t)).forEach(t=>{const e=window[t]||(window[t]={});e.que||(e.que=[]);const i={name:t,instance:e};this.sdkInstances.push(i),this.subscribe(i),this.collectPastEvents(i)})};t();const e=setInterval(t,500);setTimeout(()=>{clearInterval(e)},1e4)}processAdRender(t,e){const i=t.adUnitCode,s=this.getElementData(i),n=null==s?void 0:s.element;(n||s.nonUniqueElementState)&&this.detectionCallback(i,n,void 0,this.extractAdDetails(t,e),void 0,s.nonUniqueElementState)}subscribe(t){const e=t.instance,i=e=>{this.processAdRender(e.bid,t.name)},s=t=>{this.auctionCallback(t,e)},n=t=>{this.bidResponseCallback(t,e)},r=t=>{this.setTargetingCallback(t)};e.que.push(()=>{e.onEvent(this.AD_RENDER_SUCCEEDED_EVENT,i),e.onEvent(this.AUCTION_END_EVENT,s),e.onEvent(this.BID_RESPONSE_EVENT,n),e.onEvent(this.SET_TARGETING,r)}),this.terminateCallbacks.push(()=>{e.que.push(()=>{e.offEvent(this.AD_RENDER_SUCCEEDED_EVENT,i),e.offEvent(this.AUCTION_END_EVENT,s),e.offEvent(this.BID_RESPONSE_EVENT,n),e.offEvent(this.SET_TARGETING,r)})})}collectPastEvents(t){var e;const i=t.instance;((null===(e=i.getEvents)||void 0===e?void 0:e.call(i))||[]).forEach(e=>{switch(e.eventType){case this.AD_RENDER_SUCCEEDED_EVENT:return this.processAdRender(e.args.bid,t.name);case this.AUCTION_END_EVENT:return this.auctionCallback(e.args,i);case this.BID_RESPONSE_EVENT:return this.bidResponseCallback(e.args,i);case this.SET_TARGETING:return this.setTargetingCallback(e.args)}})}extractAdDetails(t,e){var i;const{cpm:s,currency:r,meta:c,ad:a,bidder:d,width:h,height:u}=t,l=null===(i=o.Converter.get())||void 0===i?void 0:i.convertToUSD(s,r),v=this.formatAdvertiserDomains(null==c?void 0:c.advertiserDomains),m=a?(new n.CreativeCollection).extractImageUrlFromHTML(a):void 0,w=Object.assign({ad:a,creativeUrl:m,mediaType:t.mediaType},(null==v?void 0:v.length)?{advertiserDomains:v}:{}),g={instanceName:e},b="number"==typeof h&&"number"==typeof u?{w:h,h:u}:void 0;return Object.assign({creativeData:w,providerData:g,cpm:l,currency:r,winningBid:d},b?{reportedSize:b}:{})}terminate(){this.terminateCallbacks.forEach(t=>t())}auctionCallback(t,e){const{adUnitCodes:i,bidsReceived:s,auctionId:n}=t,c={};s.forEach(t=>{var i;c[t.adUnitCode]=!0;const s=this.getCPMByGranularity(t,e),n=null===(i=o.Converter.get())||void 0===i?void 0:i.convertToUSD(s,t.currency);r.HighestBidCollector.get().addBid(t.adUnitCode,n)}),i.forEach(t=>{t in c||r.HighestBidCollector.get().deleteBid(t)})}bidResponseCallback(t,e){var i;const s=t.adId,n=this.getCPMByGranularity(t,e),c=null===(i=o.Converter.get())||void 0===i?void 0:i.convertToUSD(n,t.currency);r.HighestBidCollector.get().addAdID(s,c)}getCPMByGranularity(t,e){if(!e)return-2;const i={low:"pbLg",medium:"pbMg",high:"pbHg",auto:"pbAg",dense:"pbDg",custom:"pbCg"},s=+t[i[e.getConfig("priceGranularity")||i.auto]];return"number"==typeof s?s:-1}setTargetingCallback(t){for(let e in t){const i=t[e];if(!i)return;const s=i.fs_auction_id;if(!s)return;const n=i.fs_adid;if(!n)return;r.HighestBidCollector.get().addFreestarAdIDByTargeting(s,e,n)}}}e.PrebidJsProvider=c},856:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MIN_AD_SIZE=void 0,e.MIN_AD_SIZE=5},702:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Converter=void 0;class i{constructor(t){this.conversionRates=t}static get(t){return i._instance||(i._instance=new i(t)),i._instance}convertToUSD(t=0,e){var i;if(!e)return;const s=null==e?void 0:e.toUpperCase();return"USD"===s?t:(null===(i=this.conversionRates)||void 0===i?void 0:i[s])?t/this.conversionRates[s]:void 0}}e.Converter=i},442:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HighestBidCollector=void 0;class i{constructor(){this._highestBids={},this._highestBidsByAdID={},this._freestarTargeting={}}static get(){return this._instance||(this._instance=new i),this._instance}addBid(t,e){t&&e&&(this._highestBids[t]=this._highestBids[t]?Math.max(this._highestBids[t],e):e)}deleteBid(t){delete this._highestBids[t]}getHighestBid(t){return this._highestBids[t]}addAdID(t,e){this._highestBidsByAdID[t]=e}getBidByAdID(t){return this._highestBidsByAdID[t]}getHighestBidByTargeting(t,e,i){var s;if(e)return this.getBidByAdID(e);if(i){const e=null===(s=this._freestarTargeting[t])||void 0===s?void 0:s[i];if(e)return this.getBidByAdID(e)}}addFreestarAdIDByTargeting(t,e,i){var s;(s=this._freestarTargeting)[e]||(s[e]={}),this._freestarTargeting[e][t]=i}}e.HighestBidCollector=i,i._instance=null},335:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Utils=void 0;const s=i(856);class n{static getElementSize(t){let e=t.getBoundingClientRect();return{w:e.width,h:e.height}}static resolveInnerMostSingleChild(t){let e,i=t;for(;1===(e=this.getNonScriptChildren(i)).length;)i=e[0];return i}static getNonScriptChildren(t){return Array.from(t.children).filter(t=>"SCRIPT"!==t.tagName)}static isDescendantElement(t,e){if(!e||!(null==t?void 0:t.length))return!1;for(let i of t)if((null==i?void 0:i.compareDocumentPosition(e))&Node.DOCUMENT_POSITION_CONTAINED_BY)return!0;return!1}static isValidSize(t){return t.w>s.MIN_AD_SIZE&&t.h>s.MIN_AD_SIZE}static isCssVisible(t){let e=window.getComputedStyle(t);return!!e&&("visible"===e.getPropertyValue("visibility")&&"none"!==e.getPropertyValue("display")&&"0"!==e.getPropertyValue("opacity"))}static isInPageBoundaries(t){const e=t.getBoundingClientRect(),i=e.width*e.height,s=this.getVisibleArea(e);return i>0&&s/i>=.15}static isVisible(t){return this.isCssVisible(t)&&this.isInPageBoundaries(t)}static isRendered(t,e){return this.isVisible(t)&&this.isValidSize(e)}static getGlobalPageWidth(){return Math.max(window.document.body.scrollWidth,window.document.body.offsetWidth,window.document.documentElement.scrollWidth,window.document.documentElement.offsetWidth,window.document.documentElement.clientWidth)}static getGlobalPageHeight(){var t,e;return Math.floor(Math.max(null===(t=window.document.body)||void 0===t?void 0:t.scrollHeight,null===(e=window.document.body)||void 0===e?void 0:e.offsetHeight,window.document.documentElement.clientHeight,window.document.documentElement.scrollHeight,window.document.documentElement.offsetHeight))}static getVisibleArea(t){const e=this.getGlobalPageWidth(),i=this.getGlobalPageHeight(),s=t.left+window.scrollX,n=t.right+window.scrollX,r=t.bottom+window.scrollY,o=t.top+window.scrollY;if(s>window.innerWidth||n<0||r<0||o>i)return 0;let c=t.width;s<0&&(c-=Math.abs(s)),n>e&&(c-=n-e);let a=t.height;return o<0&&(a-=Math.abs(o)),r>i&&(a-=r),c*a}static isElement(t){return t instanceof Element}static getPageYOffset(){return window.pageYOffset||("CSS1Compat"===document.compatMode?document.documentElement.scrollTop:document.body.scrollTop)}static getPosition(t,e=!1){let i=t.getBoundingClientRect(),s=document.body,n=document.documentElement,r=e?window.pageYOffset||n.scrollTop||s.scrollTop:this.getPageYOffset(),o=window.pageXOffset||n.scrollLeft||s.scrollLeft,c=n.clientTop||s.clientTop||0,a=n.clientLeft||s.clientLeft||0,d=i.top+r-c,h=i.left+o-a;return{y:Math.round(d),x:Math.round(h)}}static getElementPosition(t){let e={y:-1,x:-1};return t&&this.isElement(t)?(e=this.getPosition(t),e):e}static calculateViewport(){let t={width:0,height:0};return void 0!==window.innerWidth?(t.width=window.innerWidth,t.height=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth&&(t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight),t.area=t.height&&t.width?t.height*t.width:0,t}static getViewport(){return this.viewport||(this.viewport=n.calculateViewport()),this.viewport}static getCurrentScrollPosition(){const t=this.getPageYOffset();return{top:t,bottom:t+Number(this.getViewport().height),left:window.pageXOffset}}static getElementPercentageInViewport(t){const e=n.getElementPosition(t).y,i=n.getElementSize(t).h,s=e+i,r=n.getCurrentScrollPosition();let o;return s<r.top||e>r.bottom?0:s<=r.bottom&&e>=r.top?100:(o=s>r.bottom?r.bottom-e:s-r.top,100*Math.min(Number(o/i),1))}static resolveAdSize(t){let e,i=t;for(;1===(e=n.getNonScriptChildren(i)).length;)i=e[0];return this.getElementSize(i)}static isPositionedDisconnected(t,e){return!!e&&!!(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_DISCONNECTED)}}e.Utils=n},301:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebVitals=void 0;var s=i(340);Object.defineProperty(e,"WebVitals",{enumerable:!0,get:function(){return s.WebVitals}})},340:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebVitals=void 0;var i=function(){function t(t,e){this.webVitalsData={pv:t,url:e}}return t.prototype.getData=function(){return this.webVitalsData},t.prototype.measure=function(){var t=this;this.getInstance().then(function(e){e.onLCP(t.collectWebVitals.bind(t)),e.onCLS(t.collectWebVitals.bind(t)),e.onINP(t.collectWebVitals.bind(t))})},t.prototype.collectWebVitals=function(t){var e=this.prepareDataFields(t),i=e.name.toLowerCase();this.webVitalsData[i]=e.value},t.prototype.getInstance=function(){return new Promise(function(t){if(window.brw_webVitals)t(window.brw_webVitals);else{var e=document.createElement("script");e.src="//cdn.browsiprod.com/web-vitals/web-vitals-4.2.3.js",e.onload=function(){t(window.brw_webVitals)},document.head.appendChild(e)}})},t.prototype.prepareDataFields=function(t){var e=t.name,i=t.value;return{name:e,value:i="number"==typeof i?+i.toFixed(3):i}},t}();e.WebVitals=i},145:function(t,e,i){var s=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))(function(n,r){function o(t){try{a(s.next(t))}catch(t){r(t)}}function c(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,c)}a((s=s.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const n=i(486),r=i(301),o=i(892),c=i(566),a=i(503),d=i(226),h=i(685),u=i(125),l=i(972);class v{constructor(){this.intersectionHandlers=[],this.campaignIdsMap={},this.foldsTouchesMap={},this.timeInViewMap={}}static get(){return v._instance||(this._instance=new v),v._instance}init(t,e,i){this.device=e,this.isExplorerSource=t.sc===o.SourceCollector.EXPLORER,this.initProvidersDetector(i),this.initSummaryEvents(),this.initTouchListener(),this.webVitals=new r.WebVitals(t.atid,encodeURIComponent(a.default.getPageUrl())),this.webVitals.measure(),this.initExplorerFunction(t.efn)}initProvidersDetector(t){u.ProvidersDetector.onAdFound(t=>this.handleAdFound(t)),u.ProvidersDetector.onAdDoneProcess(t=>this.handleAdDoneProcess(t)),u.ProvidersDetector.onAdRemoved(t=>this.handleAdRemoved(t)),u.ProvidersDetector.init([{type:u.ProviderType.HEADER_BIDDING},{type:u.ProviderType.AD_SENSE},{type:u.ProviderType.DFP,debug:!1}],new l.default("ProvidersDetector"),t)}handleAdFound(t){var e;t.refreshCount>0&&this.handleRefreshedAd(t),t.provider===u.ProviderType.DFP&&a.default.isMissingGAMCreativeData(t.creativeData)&&(null===(e=t.creativeData)||void 0===e?void 0:e.html)&&c.default.get().sendDebugEvent(t),this.collectTimeInView(t)}handleAdDoneProcess(t){this.collectCampaignIds(t),t.provider!==u.ProviderType.HEADER_BIDDING&&t.provider!==u.ProviderType.DFP||this.handleExtractCreativeUrlSucceeded(t)}handleExtractCreativeUrlSucceeded(t){var e,i,s,n;const r=(null===(e=t.creativeData)||void 0===e?void 0:e.creativeUrl)||(null===(i=t.creativeData)||void 0===i?void 0:i.gamCreativeUrl);if(r){const e=null===(n=null===(s=t.creativeData)||void 0===s?void 0:s.advertiserDomains)||void 0===n?void 0:n[0];c.default.get().ExtractCreativeUrlSucceededEvent(r,e)}}collectCampaignIds(t){return s(this,void 0,void 0,function*(){const{id:e,refreshCount:i,element:s}=t,n=null==s?void 0:s.querySelector("iframe");if(!n)return;const r=yield this.getCampaignIds(n);if(!r||!Object.keys(r).length)return;if(this.campaignIdsMap[e]=this.campaignIdsMap[e]||{},this.campaignIdsMap[e][i]=this.campaignIdsMap[e][i]||{},this.campaignIdsMap[e][i]=r,!r.impressionId)return;const o=this.findImpressionIdConflicts(r.impressionId,e,i);o.length>0&&c.default.get().sendErrorEvent(JSON.stringify({message:"Found conflicting impressionIds",conflicts:o}))})}handleRefreshedAd(t){this.stopCollectingTimeInView(t)}handleAdRemoved(t){this.stopCollectingTimeInView(t)}collectTimeInView(t){if(!t.element||this.isExplorerSource)return;const e=new h.default(t.element,.5,[1e3,2e3,3e3,5e3,7e3,8e3,1e4,15e3,2e4,25e3,3e4],e=>{const i=e/1e3,{id:s,refreshCount:n}=t;this.timeInViewMap[s]=this.timeInViewMap[s]||{},this.timeInViewMap[s][n]=this.timeInViewMap[s][n]||{mtiv:0},this.timeInViewMap[s][n].mtiv=Math.max(this.timeInViewMap[s][n].mtiv,i)});this.intersectionHandlers.push({element:t.element,observer:e}),e.observe()}stopCollectingTimeInView(t){if(this.isExplorerSource)return;const e=this.intersectionHandlers.find(e=>e.element===t.element);e&&(e.observer.clearObserver(),this.intersectionHandlers=this.intersectionHandlers.filter(e=>e.element!==t.element))}getWebVitalsData(){var t;return null===(t=this.webVitals)||void 0===t?void 0:t.getData()}getEngagementData(){const t=n.Engagement.get().getData();return{pageLoadTime:t.page_load_time,timeOnPage:t.time_on_page,velocity:t.velocity_including_static_time,maxScrollDepthPercentage:t.max_depth_percentage}}getPlacementsData(t=!1){var e;const i=(null===(e=u.ProvidersDetector.get())||void 0===e?void 0:e.getAllAds())||[];return(t?i.filter(t=>!t.element):i.filter(t=>t.element)).map(t=>{var e,i,s;const{provider:n,id:r,refreshCount:o,size:c,isRenderedInView:d,refreshRate:h,adUnit:u,cpm:l,creativeData:v,providerData:m,winningBid:w,maxUpdateDuration:g,highestBid:b,highestCpmByKv:f,browserTimeStamp:p}=t,O=t.element,y=O?a.default.isStickyAd(O):void 0,j=O?a.default.getFrameData(O):void 0,_=r.includes("browsi"),D=O?a.default.getElementFoldNumber(O):void 0,S=O?a.default.getElementPosition(O).y:void 0,M=D&&this.foldsTouchesMap[D]||0,A=null===(e=this.campaignIdsMap[r])||void 0===e?void 0:e[o],I=(null===(s=null===(i=this.timeInViewMap[r])||void 0===i?void 0:i[o])||void 0===s?void 0:s.mtiv)||0,{instanceName:C}=m||{},{advertiserDomains:E,creativeUrl:P,mediaType:U="",gamAdvertiserDomain:$,gamCreativeUrl:k,gamClickUrl:T}=v||{},R=a.default.getGPID(r,u);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({provider:n,placementId:r,refreshCount:o,refreshRate:h,height:null==c?void 0:c.h,width:null==c?void 0:c.w,isBrwAd:_,isRenderedInView:d,touches:M,timeInView:I,cpm:l,advertiserDomains:E,instanceName:C,mediaType:U,gpid:R,message:null==g?void 0:g.toString(),browserTimeStamp:p,highestBid:b},y?{isSticky:y,fold:D,adLocation:S}:{}),D?{isSticky:y,fold:D,adLocation:S}:{}),S?{isSticky:y,fold:D,adLocation:S}:{}),P?{creativeUrl:P}:{}),(null==j?void 0:j.iframeId)?{iframeId:j.iframeId}:{}),(null==j?void 0:j.frameType)?{frameType:j.frameType}:{}),A?Object.assign({},A):{}),w?{winningBid:w}:{}),$?{gamAdvertiserDomain:$}:{}),k?{gamCreativeUrl:k}:{}),T?{gamClickUrl:T}:{}),f?{highestCpmByKv:f}:{})})}getCampaignIds(t){return s(this,void 0,void 0,function*(){return new Promise(e=>{const i=t=>{const e=Object.assign(Object.assign(Object.assign(Object.assign({},t.iid?{impressionId:t.iid}:{}),t.cid?{creativeId:t.cid}:{}),t.ayid?{agencyId:t.ayid}:{}),t.cnid?{campaignId:t.cnid}:{});return this.clearCampaignIds(t),e};if(t.iid)return e(i(t));{const s=setInterval(()=>{if(t.iid)return clearInterval(s),e(i(t))},500);setTimeout(()=>e(i(t)),2e3)}})})}clearCampaignIds(t){try{delete t.iid,delete t.cid,delete t.ayid,delete t.cnid}catch(t){}}getImgData(){const t=Array.from(document.querySelectorAll("img"));return this.getElementsSummary(t)}getTextElementsData(){const t=Array.from(document.querySelectorAll("p"));return this.getElementsSummary(t)}getAdsData(){var t;const e=(null===(t=u.ProvidersDetector.get())||void 0===t?void 0:t.getAllAds())||[],i=null==e?void 0:e.filter(t=>t.element&&0===t.refreshCount).map(t=>t.element),s=this.getElementsSummary(i,!1,!1),n=e.filter(t=>{var e,i;return(null===(i=null===(e=this.timeInViewMap[t.id])||void 0===e?void 0:e[t.refreshCount])||void 0===i?void 0:i.mtiv)>=1});return{count:e.length,viewedAdsCount:n.length,totalSize:s.totalSize,totalHeight:s.totalHeight}}getElementsSummary(t,e=!0,i=!0){let s=0,n=0;return{count:t.filter(t=>{if(i&&!a.default.isVisible(t,!0))return!1;const{w:r,h:o}=a.default.getElementSize(t);return!(e&&r<=5&&o<=5)&&(s+=r*o,n+=o,!0)}).length,totalSize:s,totalHeight:n}}initSummaryEvents(){d.default.instance.subscribe(t=>{if(t){const t=c.default.get();t.sendPageSummaryEvent(),t.sendPlacementSummaryEvent(),t.sendEmptyPlacementSummaryEvent()}})}initTouchListener(){this.isExplorerSource||"desktop"===this.device||window.addEventListener("touchstart",t=>{Array.from(t.changedTouches).forEach(t=>{const e=a.default.getFoldNumberByDistance(t.pageY);this.foldsTouchesMap[e]=this.foldsTouchesMap[e]||0,this.foldsTouchesMap[e]++})})}initExplorerFunction(t){this.isExplorerSource&&t&&(window[t]=()=>new Promise(t=>{const e=c.default.get();e.sendPageSummaryEvent(),e.sendPlacementSummaryEvent(),e.sendEmptyPlacementSummaryEvent(),t()}))}findImpressionIdConflicts(t,e,i){const s=[];for(const[n,r]of Object.entries(this.campaignIdsMap))for(const[o,{impressionId:c}]of Object.entries(r))n===e&&+o===i||c===t&&s.push({impressionId:c,placementId:n,refreshCount:i});return s}}e.default=v},566:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=i(972),n=i(503),r=i(145),o=i(445),c=i(876),a=i(892);class d{constructor(t){this.logger=new s.default("EventsService"),this.isExplorerSource=t.sc===a.SourceCollector.EXPLORER,this.staticData=t,this.commonFields=this.getCommonFields(),this.eventServerDomain=t.esd,this.dataCollector=r.default.get()}static get(t){return d._instance||(this._instance=new d(t)),d._instance}setDetectionData(t){this.commonFields=this.getCommonFields(t)}getTimeOffset(){return Date.now()-this.staticData.st}getTimeDelay(){const t=n.default.getDomInteractiveTime();return t?Date.now()-t:-1}getCommonFields(t){const e=this.staticData.sr||t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.isExplorerSource?{ev:this.staticData.ev,es:this.staticData.es,eid:this.staticData.eid}:{sid:this.staticData.sid,uid:this.staticData.uid}),{atid:this.staticData.atid,sc:this.staticData.sc,ver:this.staticData.v,iru:this.staticData.iru,url:encodeURIComponent(this.staticData.url)}),this.staticData.pvid?{pvid:this.staticData.pvid}:{}),(null==e?void 0:e.trafficSource)?{ts:e.trafficSource}:{}),(null==e?void 0:e.devicePlatform)?{dp:e.devicePlatform}:{}),(null==e?void 0:e.countryCode)?{geo:e.countryCode}:{}),(null==e?void 0:e.os)?{dos:e.os}:{}),(null==e?void 0:e.browser)?{db:e.browser}:{}),(null==e?void 0:e.city)?{ct:e.city}:{}),(null==e?void 0:e.region)?{st:e.region}:{}),(null==e?void 0:e.articleId)?{aid:e.articleId}:{})}getEventServerUrl(t){return`${this.eventServerDomain}/${t}`}buildFormattedEvent(t,e=!0){return[Object.assign({events:t},e?this.commonFields:{})]}logEvent(t,e,i){this.logger.style(`%c[${this.logger.name}] ${t}/${e}`,"color: white; background-color: #084847; border-radius: 4px; font-size:16px; font-weight:bold; padding:2px;",i)}send(t,e,i,s=!0){const n=this.buildFormattedEvent(i,s),r=new XMLHttpRequest;r.open("POST",this.getEventServerUrl(t),!0),r.send(JSON.stringify(n)),this.logEvent(t,e,n)}sendBeacon(t,e,i,s=!0){try{const n=this.buildFormattedEvent(i,s);if(navigator.sendBeacon(this.getEventServerUrl(t),JSON.stringify(n)))return this.logEvent(t,e,n),!0}catch(t){return this.logger.verbose("failed sending events on beacon",event),!1}return!1}sendAgentHit(t){const e=this.getAgentHitEvent(t);this.send(o.EventTopic.A_PAGE,c.EventType.AGENT_HIT,[e])}sendAgentLoadedEvent(){const t=this.getAgentLoadedEvent();this.send(o.EventTopic.A_PAGE,c.EventType.AGENT_LOADED,[t])}sendPageSummaryEvent(){const t=this.getPageSummaryEvent();this.sendBeacon(o.EventTopic.A_PAGE,c.EventType.PAGE_SUMMARY,[t])||this.send(o.EventTopic.A_PAGE,c.EventType.PAGE_SUMMARY,[t])}sendPlacementSummaryEvent(){const t=this.getPlacementSummaryEvent();if(!t)return;this.sendBeacon(o.EventTopic.A_PLACEMENT,c.EventType.PLACEMENT_SUMMARY,[t])||this.send(o.EventTopic.A_PLACEMENT,c.EventType.PLACEMENT_SUMMARY,[t])}sendEmptyPlacementSummaryEvent(){const t=this.getPlacementSummaryEvent(!0);if(!t)return;this.sendBeacon(o.EventTopic.A_PLACEMENT,c.EventType.EMPTY_PLACEMENT_SUMMARY,[t])||this.send(o.EventTopic.A_PLACEMENT,c.EventType.EMPTY_PLACEMENT_SUMMARY,[t])}ExtractCreativeUrlSucceededEvent(t,e){const i=this.getExtractCreativeUrlSucceededEvent(t,e);this.send(o.EventTopic.A_PREBID,c.EventType.PREBID_WIN,[i],!1)}sendErrorEvent(t){const e=this.getErrorEvent(t);this.send(o.EventTopic.A_PAGE,c.EventType.ERROR,[e])}sendDebugEvent(t){const e=this.getDebugEvent(t);this.send(o.EventTopic.AD_CREATIVE,c.EventType.DEBUG,[e])}getAgentHitEvent(t){const e=this.getQueryStringParams();return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({et:c.EventType.AGENT_HIT,det:!!t,to:this.getTimeOffset(),td:this.getTimeDelay(),vph:n.default.getViewport().height,vpw:n.default.getViewport().width},this.staticData.iid?{iid:this.staticData.iid}:{}),this.staticData.cid?{cid:this.staticData.cid}:{}),this.staticData.ayid?{ayid:this.staticData.ayid}:{}),this.staticData.cnid?{cnid:this.staticData.cnid}:{}),t?{datid:t}:{}),document.referrer?{ref:document.referrer}:{}),Object.keys(e).length?{qp:e}:{})}getQueryStringParams(){const t=n.default.getUrlQueryParams().map(t=>t.split("=")).filter(t=>2===t.length).reduce((t,[e,i])=>{const s=new Set(i.split(","));return t[e]=Array.from(s).join(","),t},{});return JSON.stringify(t)}getAgentLoadedEvent(){const t=n.default.getMetaDataLanguage();return Object.assign({et:c.EventType.AGENT_LOADED,to:this.getTimeOffset()},t?{ln:t}:{})}getPageSummaryEvent(){const t=this.dataCollector.getEngagementData(),e=this.dataCollector.getWebVitalsData(),i=this.dataCollector.getTextElementsData(),s=this.dataCollector.getImgData(),r=this.dataCollector.getAdsData(),o=n.default.getMetaDataLanguage();return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({et:c.EventType.PAGE_SUMMARY,to:this.getTimeOffset(),ieop:n.default.isDisplayEngineOnPage(),vph:n.default.getViewport().height,vpw:n.default.getViewport().width,ph:n.default.getGlobalPageHeight(),pw:n.default.getGlobalPageWidth(),plt:t.pageLoadTime,ic:s.count,tis:s.totalSize,tih:s.totalHeight,ac:r.count,vac:r.viewedAdsCount,tas:r.totalSize,tah:r.totalHeight,tec:i.count,ttes:i.totalSize,tth:i.totalHeight},o?{ln:o}:{}),(null==e?void 0:e.cls)?{cls:e.cls}:{}),(null==e?void 0:e.inp)?{inp:e.inp}:{}),(null==e?void 0:e.lcp)?{lcp:e.lcp}:{}),(null==t?void 0:t.pageLoadTime)?{plt:t.pageLoadTime}:{}),this.isExplorerSource?{}:{top:t.timeOnPage,sv:t.velocity,dep:t.maxScrollDepthPercentage})}getPlacementSummaryEvent(t){const e=this.dataCollector.getPlacementsData(t);if(e.length)return{et:t?c.EventType.EMPTY_PLACEMENT_SUMMARY:c.EventType.PLACEMENT_SUMMARY,to:this.getTimeOffset(),plc:e.map(t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({ps:t.provider,plid:t.placementId,rc:t.refreshCount,f:t.fold,ot:t.adLocation,ft:t.frameType,iba:t.isBrwAd,riv:t.isRenderedInView,iss:t.isSticky,gpid:t.gpid},t.browserTimeStamp?{bts:t.browserTimeStamp}:{}),t.message?{msg:t.message}:{}),t.width?{w:t.width}:{}),t.height?{h:t.height}:{}),t.iframeId?{ifid:t.iframeId}:{}),t.impressionId?{iid:t.impressionId}:{}),t.creativeId?{cid:t.creativeId}:{}),t.agencyId?{ayid:t.agencyId}:{}),t.campaignId?{cnid:t.campaignId}:{}),this.isExplorerSource?{}:{mtiv:t.timeInView,tch:t.touches}),t.cpm?{br:t.cpm}:{}),t.advertiserDomains?{add:t.advertiserDomains}:{}),t.winningBid?{n:t.winningBid}:{}),t.mediaType?{mt:t.mediaType}:{}),t.instanceName?{pi:t.instanceName}:{}),t.refreshRate?{rr:Number(t.refreshRate.toFixed(1))}:{}),t.creativeUrl?{curl:encodeURIComponent(t.creativeUrl)}:{}),t.gamClickUrl?{gcu:encodeURIComponent(t.gamClickUrl)}:{}),void 0!==t.highestCpmByKv?{gkv:t.highestCpmByKv}:{}),t.gamCreativeUrl?{gcurl:encodeURIComponent(t.gamCreativeUrl)}:{}),t.gamAdvertiserDomain?{gadd:t.gamAdvertiserDomain}:{}),void 0!==t.highestBid?{ghb:t.highestBid}:{}))}}getExtractCreativeUrlSucceededEvent(t,e){return Object.assign({et:c.EventType.PREBID_WIN,curl:encodeURIComponent(t)},e?{fad:e}:{})}getErrorEvent(t){return{et:c.EventType.ERROR,to:this.getTimeOffset(),td:this.getTimeDelay(),msg:t}}getDebugEvent(t){const{gamAdvertiserDomain:e,html:i}=t.creativeData||{};return Object.assign(Object.assign(Object.assign({ps:t.provider,et:c.EventType.DEBUG,plid:t.id},i?{chtml:i}:{}),(null==e?void 0:e[0])?{fad:e}:{}),t.size?{size:`"${t.size.w}x${t.size.h}`}:{})}}e.default=d},226:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=i(972);class n{constructor(){this.callbacks=[],this.waitForFocus=[],this.logger=new s.default("FocusService"),this.isHidden="hidden"===document.visibilityState,this.logger.info(`focus on start. in focus: ${!this.isHidden}`),this.isSubscribed=!0,this.listenToVisibilityChange()}static get instance(){return this._instance||(this._instance=new n),this._instance}listenToVisibilityChange(){document.addEventListener("visibilitychange",()=>{if(!this.isSubscribed)return;const t="hidden"===document.visibilityState;this.isHidden!==t&&(this.isHidden=t,this.fireCallbacks(t),t||this.fireWaitForFocus(),this.logger.info(`focus changed. in focus: ${!this.isHidden}`))})}subscribe(t){this.callbacks.push(t)}fireCallbacks(t){this.callbacks.forEach(e=>{e(t)})}fireWaitForFocus(){for(;this.waitForFocus.length;){const t=this.waitForFocus.shift();"function"==typeof t&&t()}}}e.default=n},685:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=i(972),n=i(226);e.default=class{constructor(t,e,i=[1e3],n,r,o,c,a=!0){this.timeouts=[],this.isInView=!1,this.logger=new s.default("IntersectionHandler"),this.element=t,this.threshold=e,this.rootMargin=r,i=Array.from(new Set(i)),this.breakpoints=i.sort((t,e)=>t-e),this.observer=this.initObserver(),this.callback=n,this.outOfThresholdCallback=o||(()=>{}),this.isContinuousObserver=!!c,this.shouldCheckMinSize=a}initObserver(){let t={threshold:[this.threshold,Math.max(0,this.threshold-.01)],rootMargin:this.rootMargin};return n.default.instance.subscribe(t=>{t?this.clearAllTimeouts():this.isInView&&this.setBreakpointsTimeouts()}),new IntersectionObserver(this.observationCallback.bind(this),t)}observe(){return this.logger.info("observe ",this.element,` for threshold of ${this.threshold} with breakpoint of ${this.breakpoints} and ${this.rootMargin||"no"} rootMargin`),this.observer.observe(this.element),new Promise(t=>{this.resolver=t})}observationCallback(t){const e=t[0];e.intersectionRatio>=this.threshold&&this.isAboveMinimumSize(e.boundingClientRect.height)?(this.isInView=!0,this.setBreakpointsTimeouts()):(this.isInView=!1,this.clearAllTimeouts(),this.outOfThresholdCallback())}isAboveMinimumSize(t){return!this.shouldCheckMinSize||t>=5}setBreakpointsTimeouts(){const t=this.isContinuousObserver?[...this.breakpoints]:this.breakpoints;t.forEach(e=>{this.timeouts.push(setTimeout(()=>{const e=t.shift();this.callback(e),this.breakpoints.length||this.observationDone()},e))})}clearAllTimeouts(){this.timeouts.forEach(t=>{clearTimeout(t)})}observationDone(){this.logger.info("All break points reached for element:",this.element),this.resolver(),this.clearObserver()}clearObserver(){this.logger.info("Stop observing",this.element),this.clearAllTimeouts(),this.observer.unobserve(this.element),this.observer.disconnect()}}},972:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LogType=void 0;const s=i(503);var n;!function(t){t[t.VERBOSE=0]="VERBOSE",t[t.INFO=1]="INFO",t[t.ERROR=2]="ERROR",t[t.LOG=3]="LOG"}(n=e.LogType||(e.LogType={}));e.default=class{constructor(t){if(this.loggerFallback=!1,this.name=t,this.active=!!s.default.getDebugConfig().debug,this.active){let t=window.console;if(!t.hasOwnProperty("debug")||!t.hasOwnProperty("info")||!t.hasOwnProperty("log")){let t=document.createElement("iframe");t.width="0",t.height="0",document.body.appendChild(t);let e=t.contentWindow;["debug","info","log"].forEach(t=>window.console[t]=e&&e.console[t])}}}print(t,e){if(!this.active)return;const i=window.console,s=[],r="color: white; background-color: #084847; border-radius: 4px; padding-top: 1px; padding-bottom: 2px;",o=t=>{let n=s.concat(e);if(this.loggerFallback)return this.loggerWithArguments(t,n);try{i[t].apply(i,n)}catch(e){return this.loggerFallback=!0,this.loggerWithArguments(t,n)}};switch(t){case n.VERBOSE:s.push(`%c ins_agent %c[${this.name}]`,r,"color: gray;"),o("debug");break;case n.INFO:s.push(`%c ins_agent %c[${this.name}]`,r,"color: gray;"),o("info");break;case n.ERROR:s.push(`%c ins_agent %c[!] [${this.name}]`,r,"color: red;"),o("error");break;case n.LOG:o("log")}}loggerWithArguments(t,e){let i=`console.${t}(args)`,s=e.map((t,e)=>`args[${e}]`);new Function("args",i.replace(/args/,s.join(",")))(e)}verbose(...t){this.print(n.VERBOSE,Array.prototype.slice.call(arguments))}info(...t){this.print(n.INFO,Array.prototype.slice.call(arguments))}error(...t){this.print(n.ERROR,Array.prototype.slice.call(arguments))}style(...t){this.print(n.LOG,Array.prototype.slice.call(arguments))}}},503:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=i(439);class n{static getViewport(){return this.viewport||(this.viewport=n.calculateViewport()),this.viewport}static getDebugConfig(){const t=sessionStorage.getItem("__brins");let e={};return t&&(e=JSON.parse(t)),e}static getDetectedAgentId(){var t;try{return null===(t=window.instag)||void 0===t?void 0:t.alid}catch(t){}}static setDetectedAgentId(t){try{window.instag.alid=t}catch(t){}}static generateUUIDIfSupported(){return window.crypto&&window.crypto.randomUUID?window.crypto.randomUUID()||"":this.algoGenerateUUID()}static algoGenerateUUID(){return`${window&&window.crypto&&window.crypto.getRandomValues?"r_":"f_"}${"10000000-1000-4000-8000-100000000000".replace(/[018]/g,t=>(+t^this.getRandomData()).toString(16))}`}static getRandomData(){return window&&window.crypto&&window.crypto.getRandomValues?crypto.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random()}static getCookie(t){const e=document.cookie.split(/\s*;\s*/).map(t=>{const e=t.split(/\s*=\s*/);if(2===(null==e?void 0:e.length))return{key:e[0],value:e[1]}}).find(e=>(null==e?void 0:e.key)===t);return e?e.value:""}static setCookie(t,e="",i=0,s="d"){let n=6e4;"d"===s&&(n*=1440);let r=new Date(+new Date+i*n);document.cookie=t+"="+e+"; expires="+r.toUTCString()+"; path=/"}static setLocalStorage(t,e){try{localStorage.setItem(t,e)}catch(t){}}static getLocalStorage(t){try{return window.localStorage.getItem(t)||""}catch(t){}return""}static setSessionStorage(t,e){sessionStorage[t]="string"==typeof e?e:JSON.stringify(e)}static getSessionStorage(t){let e;try{e=sessionStorage.getItem(t)}catch(t){}return e||""}static toUrlParams(t){return Object.keys(t).map(e=>e+"="+("object"==typeof t[e]?encodeURIComponent(JSON.stringify(t[e])):encodeURIComponent(t[e]))).join("&")}static xhrPromise(t){return new Promise((e,i)=>{const s=new XMLHttpRequest;s.open("GET",t,!0),s.onreadystatechange=function(){s.readyState==(s.DONE||4)&&(s.status>=200&&s.status<300?e(s):i(s.status))},s.send()})}static isObject(t){return t&&"object"==typeof t&&!Array.isArray(t)}static mergeDeep(t,e){if(this.isObject(t)&&this.isObject(e))for(const i in e)!e.hasOwnProperty(i)||!this.isObject(e[i])||e[i]instanceof Node?Object.assign(t,{[i]:e[i]}):(t[i]||Object.assign(t,{[i]:{}}),this.mergeDeep(t[i],e[i]));return t}static getPageUrl(){return`${window.document.location.protocol}//${window.document.location.host}${window.document.location.pathname}`}static getUrlQueryParams(){let t=[];const e=/^(?:\?)(.*)/.exec(window.location.search);if(2===(null==e?void 0:e.length)){const i=e[1].split(/&/);t=i.splice(0,Math.min(i.length,10))}return t}static getPageHeight(){const t=window.document.body,e=window.document.documentElement;return Math.floor(Math.max(null==t?void 0:t.scrollHeight,null==t?void 0:t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight))}static getPageWidth(){const t=window.document.documentElement;return Math.floor(Math.max(t.clientWidth,t.scrollWidth,t.offsetWidth))}static getFoldNumberByDistance(t){return Math.floor(t/this.getViewport().height)+1}static calculateViewport(){let t={width:0,height:0};return void 0!==window.innerWidth?(t.width=window.innerWidth,t.height=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth&&(t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight),t.area=t.height&&t.width?t.height*t.width:0,t}static isVisible(t,e){let i=window.getComputedStyle(t),s=!e||this.isElementVisible(t);return!!i&&(s&&"visible"===i.getPropertyValue("visibility")&&"none"!==i.getPropertyValue("display")&&"0"!==i.getPropertyValue("opacity"))}static isElementVisible(t){let e=t.getBoundingClientRect();return e.top>=0&&e.right<=window.innerWidth&&e.bottom<=this.getPageHeight()&&e.left>=0&&e.height>0||this.isElementInBodyBoundary(t)}static isElementInBodyBoundary(t){let e=t.offsetTop,i=t.offsetLeft,s=t.offsetParent;const n=t.offsetWidth,r=t.offsetHeight;for(;s;)e+=s.offsetTop,i+=s.offsetLeft,s=s.offsetParent;const o=window.document.body,c=o.offsetTop,a=o.offsetLeft,d=o.offsetWidth;return e>=c&&i>=a&&n<=d&&r>0}static getElementSize(t){let e=t.getBoundingClientRect();return{w:e.width,h:e.height}}static getElementFoldNumber(t){const e=this.getElementPosition(t).y;return e<0?this.NEGATIVE_FOLD_VALUE:Math.floor(e/this.getViewport().height)+1}static getElementPosition(t){let e={y:-1,x:-1};return t&&this.isElement(t)?(e=this.getPosition(t),e):e}static isElement(t){return t instanceof Element}static getPosition(t,e=!1){let i=t.getBoundingClientRect(),s=document.body,n=document.documentElement,r=e?window.pageYOffset||n.scrollTop||s.scrollTop:this.getPageYOffset(),o=window.pageXOffset||n.scrollLeft||s.scrollLeft,c=n.clientTop||s.clientTop||0,a=n.clientLeft||s.clientLeft||0,d=i.top+r-c,h=i.left+o-a;return{y:Math.round(d),x:Math.round(h)}}static getPageYOffset(){return window.pageYOffset||("CSS1Compat"===document.compatMode?document.documentElement.scrollTop:document.body.scrollTop)}static isFluidSize(t){return 0===t.w&&0===t.h}static isValidSize(t,e=!1){return e&&this.isFluidSize(t)||t.w>5&&t.h>5}static isVisibleNew(t){return this.isCssVisible(t)&&this.isInPageBoundaries(t)}static isCssVisible(t){let e=window.getComputedStyle(t);return!!e&&("visible"===e.getPropertyValue("visibility")&&"none"!==e.getPropertyValue("display")&&"0"!==e.getPropertyValue("opacity"))}static isInPageBoundaries(t){const e=t.getBoundingClientRect(),i=e.width*e.height,s=this.getVisibleArea(e);return i>0&&s/i>=.15}static getVisibleArea(t){const e=this.getGlobalPageWidth(),i=this.getGlobalPageHeight(),s=t.left+window.scrollX,n=t.right+window.scrollX,r=t.bottom+window.scrollY,o=t.top+window.scrollY;if(s>window.innerWidth||n<0||r<0||o>i)return 0;let c=t.width;s<0&&(c-=Math.abs(s)),n>e&&(c-=n-e);let a=t.height;return o<0&&(a-=Math.abs(o)),r>i&&(a-=r),c*a}static getGlobalPageWidth(){return Math.max(window.document.body.scrollWidth,window.document.body.offsetWidth,window.document.documentElement.scrollWidth,window.document.documentElement.offsetWidth,window.document.documentElement.clientWidth)}static getGlobalPageHeight(){var t,e;return Math.floor(Math.max(null===(t=window.document.body)||void 0===t?void 0:t.scrollHeight,null===(e=window.document.body)||void 0===e?void 0:e.offsetHeight,window.document.documentElement.clientHeight,window.document.documentElement.scrollHeight,window.document.documentElement.offsetHeight))}static isPositionedDisconnected(t,e){return!!e&&!!(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_DISCONNECTED)}static isDescendantElement(t,e){for(let i of t)if(i.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)return!0;return!1}static isDisplayEngineOnPage(){return!!document.getElementById("browsi-tag")}static isFriendlyIframe(t){let e=+new Date+""+Math.random();try{let i=t.contentWindow;return!!i&&(i[e]="asd","asd"===i[e])}catch(t){return!1}}static getDomInteractiveTime(){const t=performance.getEntriesByType("navigation")[0];if(t){const e=performance.timeOrigin+t.domInteractive;return Math.floor(e)}return-1}static getElementPercentageInViewport(t){const e=n.getElementPosition(t).y,i=n.getElementSize(t).h,s=e+i,r=n.getCurrentScrollPosition();let o;return s<r.top||e>r.bottom?0:s<=r.bottom&&e>=r.top?100:(o=s>r.bottom?r.bottom-e:s-r.top,100*Math.min(Number(o/i),1))}static getCurrentScrollPosition(){const t=this.getPageYOffset();return{top:t,bottom:t+Number(this.getViewport().height),left:window.pageXOffset}}static getGPID(t,e){return`${e?e+"#":""}${t}`}static isPositionStickyOrFixed(t){var e;if(!t||t===document.body)return!1;const i=null===(e=window.getComputedStyle(t))||void 0===e?void 0:e.position;return"sticky"===i||"fixed"===i||!!t.parentElement&&this.isPositionStickyOrFixed(t.parentElement)}static isInterstitialSize(t){return t>=.85*this.getViewport().height}static isStickyAd(t){const e=t.getBoundingClientRect().height;return!this.isInterstitialSize(e)&&this.isPositionStickyOrFixed(t)}static getFrameData(t){const e=t.querySelector("iframe");if(e)return{iframeId:e.id,frameType:e.src.includes("safeframe")?s.FrameType.SAFE_FRAME:s.FrameType.IFRAME}}static isMissingGAMCreativeData(t){if(!t)return!0;const{gamClickUrl:e,gamAdvertiserDomain:i,gamCreativeUrl:s}=t;return[e,i,s].some(t=>void 0===t)}static getMetaDataLanguage(){var t;return(null===(t=document.querySelector('meta[property="og:locale"]'))||void 0===t?void 0:t.content)||document.documentElement.lang}}e.default=n,n.NEGATIVE_FOLD_VALUE=-2},439:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FrameType=void 0,function(t){t.IFRAME="iframe",t.SAFE_FRAME="safeFrame"}(e.FrameType||(e.FrameType={}))},892:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExplorerSource=e.SourceCollector=void 0,function(t){t.BPT="bootstrap",t.CREATIVE="in_creative",t.EXPLORER="explorer",t.MAC="mac"}(e.SourceCollector||(e.SourceCollector={})),function(t){t.PRESET="preset",t.CREATIVE="in_creative"}(e.ExplorerSource||(e.ExplorerSource={}))},445:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EventTopic=void 0,function(t){t.A_PAGE="a_page",t.A_PLACEMENT="a_placement",t.A_PREBID="a_prebid",t.AD_CREATIVE="ad_creative"}(e.EventTopic||(e.EventTopic={}))},876:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EventType=void 0,function(t){t.AGENT_HIT="ag_hit",t.AGENT_LOADED="ag_loaded",t.PAGE_SUMMARY="page_summary",t.PLACEMENT_SUMMARY="placement_summary",t.EMPTY_PLACEMENT_SUMMARY="empty_placement_summary",t.ERROR="error",t.PREBID_WIN="prebid_win",t.DEBUG="prebid_win"}(e.EventType||(e.EventType={}))}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,i),r.exports}(()=>{const t=i(892),e=i(486),s=i(503),n=i(972),r=i(566),o=i(145);(new class{constructor(){this.logger=new n.default("app"),this.tagData=this.getTagData(),this.initTag(),this.startTime=this.getStartTime(),this.staticData=this.getStaticData(),e.Engagement.get(this.startTime).subscribe()}run(){const t=r.default.get(this.staticData),e=s.default.getDetectedAgentId();e?t.sendAgentHit(e):(s.default.setDetectedAgentId(this.staticData.atid),t.sendAgentHit(),Promise.all([this.getDetection(),this.getConversionRates()]).then(([t,e])=>this.startAgent(t,e)).catch(e=>{this.logger.error(e),t.sendErrorEvent(e)}))}getStartTime(){var t,e;return(null===(t=window.instag)||void 0===t?void 0:t.st)||(null===(e=this.tagData)||void 0===e?void 0:e.st)||+new Date}initTag(){var t;window["instag"]||(window.instag={}),(t=window.instag)["st"]||(t.st=this.getStartTime())}getTagData(){let t;try{t=document.currentScript||document.getElementById("ins-tag")}catch(t){}if(!t)throw new Error("no tag");return{sc:t.sc||t.getAttribute("data-as"),st:t.st,es:t.es,ev:t.ev,eid:t.eid,efn:t.efn,pvid:t.pvid,iid:t.iid,cid:t.cid,cnid:t.cnid,ayid:t.ayid,sr:t.sr}}getUserData(){let t,e;t=s.default.getCookie("__binsSID"),e=s.default.getLocalStorage("__binsUID")||s.default.getCookie("__binsUID");const i=!t&&!!e;return t||(t=s.default.generateUUIDIfSupported(),s.default.setCookie("__binsSID",t,30,"m")),e||(e=s.default.generateUUIDIfSupported(),s.default.setCookie("__binsUID",e,365,"d"),s.default.setLocalStorage("__binsUID",e)),{sid:t,uid:e,iru:i}}getStaticData(){const{sid:e,uid:i,iru:n}=this.getUserData(),r=this.tagData.sc===t.SourceCollector.MAC;return{sh:r?"//dd.binsiad.com":"//dd.insiad.com",esd:r?"//events.binsiad.com/events/v2":"//events.insiad.com/events/v2",v:String("1.28.373"),st:this.startTime,url:s.default.getPageUrl(),atid:s.default.generateUUIDIfSupported(),sid:e,uid:i,iru:n,sc:this.tagData.sc,es:this.tagData.es,ev:this.tagData.ev,eid:this.tagData.eid,efn:this.tagData.efn,pvid:this.tagData.pvid,iid:this.tagData.iid,cid:this.tagData.cid,ayid:this.tagData.ayid,cnid:this.tagData.cnid,sr:this.tagData.sr}}getDetection(){return new Promise((t,e)=>{if(this.staticData.sr)t(this.staticData.sr);else{const i=Object.assign({userAgent:navigator.userAgent,url:this.staticData.url},document.referrer?{referrerUrl:document.referrer}:{}),n=`${this.staticData.sh}/geodevicedetect?${s.default.toUrlParams(i)}`;s.default.xhrPromise(n).then(i=>{if(200===i.status){const e=JSON.parse(i.responseText);e&&!e.error&&t(e)}else e(`error in detection request status: ${i.status}`)}).catch(t=>{e(`error in detection request message: ${t.message}`)})}})}startAgent(t,e){const i=r.default.get();i.setDetectionData(t),i.sendAgentLoadedEvent(),o.default.get().init(this.staticData,t.devicePlatform,e)}getConversionRates(){return new Promise((t,e)=>{const i=`${this.staticData.sh}/currency-rates`;s.default.xhrPromise(i).then(e=>{if(200===e.status){const i=JSON.parse(e.responseText);i&&!i.error&&t(i)}else t(void 0)}).catch(e=>{this.logger.error("Error in conversion rates request:",e),t(void 0)})})}}).run()})()})();